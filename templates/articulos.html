<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Artículos procesados</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f6f7fb;margin:0;padding:20px}
    .container{max-width:960px;margin:0 auto}
    h1{margin-bottom:20px;color:#333}
    .card{background:#fff;padding:16px;margin-bottom:16px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
    .meta{color:#555;font-size:.9rem;margin-bottom:8px}
    .summary{margin:10px 0;color:#333}
    img.thumb{max-width:160px;max-height:120px;margin:6px 6px 0 0;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,.2)}
    .btn{display:inline-block;margin-top:10px;padding:8px 12px;background:#0d6efd;color:#fff;text-decoration:none;border-radius:6px;font-size:.9rem}
    .pager{margin-top:20px;display:flex;justify-content:space-between}
    .pager a{padding:6px 10px;background:#eee;text-decoration:none;border-radius:6px;color:#333}
    .keywords{margin-top:8px;font-size:0.85rem}
    .keyword-tag{display:inline-block;background:#e3f2fd;color:#1565c0;padding:2px 6px;margin:2px;border-radius:4px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Artículos procesados</h1>

    {% if articulos and articulos|length > 0 %}
      {% for art in articulos %}
        <div class="card">
          <h2>{{ art.title }}</h2>
          <div class="meta">
            <strong>Autores:</strong> {{ art.authors | join(', ') if art.authors else '—' }} <br>
            <strong>Publicado:</strong> {{ art.published or '—' }}<br>
            <strong>ArXiv ID:</strong> {{ art.arxiv_id or '—' }}
          </div>

          <p class="summary">{{ art.summary }}</p>

          {% if art.keywords and art.keywords|length > 0 %}
            <div class="keywords">
              <strong>Keywords:</strong>
              {% for keyword in art.keywords %}
                <span class="keyword-tag">{{ keyword }}</span>
              {% endfor %}
            </div>
          {% endif %}

          {% if art.images and art.images|length > 0 %}
            <div>
              {% for img in art.images[:2] %}
                <img class="thumb" src="{{ img }}" alt="Imagen del artículo">
              {% endfor %}
            </div>
          {% endif %}

          <!-- CORREGIDO: usar arxiv_id en lugar de articulo_id -->
          {% if art.arxiv_id %}
            <a href="{{ url_for('ver_articulo', arxiv_id=art.arxiv_id) }}" class="btn">Ver Artículo completo</a>
          {% else %}
            <span class="btn" style="background:#ccc;color:#666">Sin ID de ArXiv</span>
          {% endif %}
        </div>
      {% endfor %}

      <div class="pager">
        {% if prev_page %}
          <a href="{{ url_for('listar_articulos', page=prev_page) }}">← Anterior</a>
        {% else %}
          <span></span>
        {% endif %}

        {% if next_page %}
          <a href="{{ url_for('listar_articulos', page=next_page) }}">Siguiente →</a>
        {% endif %}
      </div>
    {% else %}
      <p>No hay artículos en la base de datos. <a href="/">Buscar artículos</a></p>
    {% endif %}

    <div class="mt-4">
      <a href="/" class="btn" style="background:#6c757d">← Buscar más artículos</a>
    </div>
  </div>
</body>
</html>